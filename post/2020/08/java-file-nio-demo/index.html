<!doctype html><html><head><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/g.nereusyi.com\/"},"articleSection":"post","name":"Java NIO File API使用总结","headline":"Java NIO File API使用总结","description":"根据实际工作中的使用和一些文档，本文总结了一些常见的Java File NIO的用法。","inLanguage":"en","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"2020","datePublished":"2020-08-30 19:55:06 \u002b0800 HKT","dateModified":"2020-08-30 19:55:06 \u002b0800 HKT","url":"https:\/\/g.nereusyi.com\/post\/2020\/08\/java-file-nio-demo\/","wordCount":"415","keywords":["java","Blog"]}</script><meta charset=utf-8><title>Java NIO File API使用总结 - NereusYi</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.81.0"><meta name=description content="根据实际工作中的使用和一些文档，本文总结了一些常见的Java File NIO的用法。"><meta name=twitter:card content="summary"><meta name=twitter:title content="Java NIO File API使用总结"><meta name=twitter:description content="根据实际工作中的使用和一些文档，本文总结了一些常见的Java File NIO的用法。"><meta property="og:title" content="Java NIO File API使用总结"><meta property="og:description" content="根据实际工作中的使用和一些文档，本文总结了一些常见的Java File NIO的用法。"><meta property="og:type" content="article"><meta property="og:url" content="https://g.nereusyi.com/post/2020/08/java-file-nio-demo/"><meta property="article:section" content="post"><meta property="article:published_time" content="2020-08-30T19:55:06+08:00"><meta property="article:modified_time" content="2020-08-30T19:55:06+08:00"><meta property="og:image" content="https://g.nereusyi.com//images/logo.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="512"><meta property="og:image:height" content="512"><meta content="java,nio" name=keywords><meta itemprop=name content="Java NIO File API使用总结"><meta itemprop=description content="根据实际工作中的使用和一些文档，本文总结了一些常见的Java File NIO的用法。"><meta itemprop=datePublished content="2020-08-30T19:55:06+08:00"><meta itemprop=dateModified content="2020-08-30T19:55:06+08:00"><meta itemprop=wordCount content="415"><meta itemprop=keywords content="java,"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700"><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.css><link rel=stylesheet href=https://g.nereusyi.com/css/main.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css><link href=//cdn.bootcss.com/highlight.js/9.11.0/styles/github.min.css rel=stylesheet type=text/css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-140619403-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-140619403-1')</script><script>var _hmt=_hmt||[];(function(){var a=document.createElement("script"),b;a.src="https://hm.baidu.com/hm.js?cad0d60e6cbf96c36edba25513ef42db",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script></head><body><div id=wrapper><header id=header><h1><a href=https://g.nereusyi.com/>Nereus</a></h1><nav class=links><ul><li><a href=https://g.nereusyi.com/post/><i class="fa fa-home">&nbsp;</i>Home</a></li><li><a href=https://g.nereusyi.com/post/><i class="fa fa-newspaper-o">&nbsp;</i>Blog</a></li><li><a href=https://g.nereusyi.com/categories/><i class="fa fa-sitemap">&nbsp;</i>Categories</a></li><li><a href=https://g.nereusyi.com/about/><i class="fa fa-id-card-o">&nbsp;</i>About</a></li></ul></nav><nav class=main><ul><li id=share-nav class=share-menu style=display:none><a class=fa-share-alt href=#share-menu>Share</a></li><li class=search><a class=fa-search href=#search>Search</a><form id=search method=get action=//google.com/search><input type=text name=q placeholder=Search>
<input type=hidden name=as_sitesearch value=https://g.nereusyi.com/></form></li><li class=menu><a class=fa-bars href=#menu>Menu</a></li></ul></nav></header><section id=menu><section><form class=search method=get action=//google.com/search><input type=text name=q placeholder=Search>
<input type=hidden name=as_sitesearch value=https://g.nereusyi.com/></form></section><section><ul class=links><li><a href=https://g.nereusyi.com/post/><h3><i class="fa fa-home">&nbsp;</i>Home</h3></a></li><li><a href=https://g.nereusyi.com/post/><h3><i class="fa fa-newspaper-o">&nbsp;</i>Blog</h3></a></li><li><a href=https://g.nereusyi.com/categories/><h3><i class="fa fa-sitemap">&nbsp;</i>Categories</h3></a></li><li><a href=https://g.nereusyi.com/about/><h3><i class="fa fa-id-card-o">&nbsp;</i>About</h3></a></li></ul></section><section class=recent-posts><div class=mini-posts><header><h3>Recent Posts</h3></header><article class=mini-post><header><h3><a href=https://g.nereusyi.com/post/>Post</a></h3><time class=published datetime=2021-03-28>March 28, 2021</time></header></article><article class=mini-post><header><h3><a href=https://g.nereusyi.com/post/2021/03/spring-boot-bean-validation/>Spring Boot Bean Validation 示例</a></h3><time class=published datetime=2021-03-28>March 28, 2021</time></header></article><a href=/post/ class=button>View more posts</a></div></section></section><section id=share-menu><section id=social-share-nav><ul class=links><header><h3>Share this post <i class="fa fa-smile-o"></i></h3></header><li><a href="//twitter.com/share?url=https%3a%2f%2fg.nereusyi.com%2fpost%2f2020%2f08%2fjava-file-nio-demo%2f&text=Java%20NIO%20File%20API%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93&via=" target=_blank class="share-btn twitter"><i class="fa fa-twitter"></i><p>Twitter</p></a></li><li><a href="//plus.google.com/share?url=https%3a%2f%2fg.nereusyi.com%2fpost%2f2020%2f08%2fjava-file-nio-demo%2f" target=_blank class="share-btn google-plus"><i class="fa fa-google-plus"></i><p>Google+</p></a></li><li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fg.nereusyi.com%2fpost%2f2020%2f08%2fjava-file-nio-demo%2f" target=_blank class="share-btn facebook"><i class="fa fa-facebook"></i><p>Facebook</p></a></li><li><a href="//reddit.com/submit?url=https%3a%2f%2fg.nereusyi.com%2fpost%2f2020%2f08%2fjava-file-nio-demo%2f&title=Java%20NIO%20File%20API%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93" target=_blank class="share-btn reddit"><i class="fa fa-reddit-alien"></i><p>Reddit</p></a></li><li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fg.nereusyi.com%2fpost%2f2020%2f08%2fjava-file-nio-demo%2f&title=Java%20NIO%20File%20API%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93" target=_blank class="share-btn linkedin"><i class="fa fa-linkedin"></i><p>LinkedIn</p></a></li><li><a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fg.nereusyi.com%2fpost%2f2020%2f08%2fjava-file-nio-demo%2f&title=Java%20NIO%20File%20API%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93" target=_blank class="share-btn stumbleupon"><i class="fa fa-stumbleupon"></i><p>StumbleUpon</p></a></li><li><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fg.nereusyi.com%2fpost%2f2020%2f08%2fjava-file-nio-demo%2f&description=Java%20NIO%20File%20API%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93" target=_blank class="share-btn pinterest"><i class="fa fa-pinterest-p"></i><p>Pinterest</p></a></li><li><a href="mailto:?subject=Check out this post by &body=https%3a%2f%2fg.nereusyi.com%2fpost%2f2020%2f08%2fjava-file-nio-demo%2f" target=_blank class="share-btn email"><i class="fa fa-envelope"></i><p>Email</p></a></li></ul></section></section><div id=main><article class=post><header><div class=title><h1><a href=https://g.nereusyi.com/post/2020/08/java-file-nio-demo/>Java NIO File API使用总结</a></h1><p>根据实际工作中的使用和一些文档，本文总结了一些常见的Java File NIO的用法。</p></div><div class=meta><time class=published datetime=2020-08-30>August 30, 2020</time>
<span class=author></span><p>2 minute read</p></div></header><section id=social-share><ul class=icons><li><a href="//twitter.com/share?url=https%3a%2f%2fg.nereusyi.com%2fpost%2f2020%2f08%2fjava-file-nio-demo%2f&text=Java%20NIO%20File%20API%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93&via=" target=_blank class="share-btn twitter"><i class="fa fa-twitter"></i><p>Twitter</p></a></li><li><a href="//plus.google.com/share?url=https%3a%2f%2fg.nereusyi.com%2fpost%2f2020%2f08%2fjava-file-nio-demo%2f" target=_blank class="share-btn google-plus"><i class="fa fa-google-plus"></i><p>Google+</p></a></li><li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fg.nereusyi.com%2fpost%2f2020%2f08%2fjava-file-nio-demo%2f" target=_blank class="share-btn facebook"><i class="fa fa-facebook"></i><p>Facebook</p></a></li><li><a href="//reddit.com/submit?url=https%3a%2f%2fg.nereusyi.com%2fpost%2f2020%2f08%2fjava-file-nio-demo%2f&title=Java%20NIO%20File%20API%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93" target=_blank class="share-btn reddit"><i class="fa fa-reddit-alien"></i><p>Reddit</p></a></li><li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fg.nereusyi.com%2fpost%2f2020%2f08%2fjava-file-nio-demo%2f&title=Java%20NIO%20File%20API%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93" target=_blank class="share-btn linkedin"><i class="fa fa-linkedin"></i><p>LinkedIn</p></a></li><li><a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fg.nereusyi.com%2fpost%2f2020%2f08%2fjava-file-nio-demo%2f&title=Java%20NIO%20File%20API%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93" target=_blank class="share-btn stumbleupon"><i class="fa fa-stumbleupon"></i><p>StumbleUpon</p></a></li><li><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fg.nereusyi.com%2fpost%2f2020%2f08%2fjava-file-nio-demo%2f&description=Java%20NIO%20File%20API%e4%bd%bf%e7%94%a8%e6%80%bb%e7%bb%93" target=_blank class="share-btn pinterest"><i class="fa fa-pinterest-p"></i><p>Pinterest</p></a></li><li><a href="mailto:?subject=Check out this post by &body=https%3a%2f%2fg.nereusyi.com%2fpost%2f2020%2f08%2fjava-file-nio-demo%2f" target=_blank class="share-btn email"><i class="fa fa-envelope"></i><p>Email</p></a></li></ul></section><div id=content><h1 id=简介>简介</h1><p>Java I/O File API是JDK的核心API之一，在构建系统时，十分常用。我在工作实践中，见到大多数人最常使用的是<code>java.io.File</code>的API，对Java7之后出现的NIO的API不太熟悉。</p><p>总的来说，File能实现的功能NIO都能实现，并且NIO API更好用、更方便，同时内置了不少工具类，也解决了File API的一些缺陷。</p><p>根据实际工作中的使用和一些文档，本文总结了一些常见的Java File NIO的用法。</p><h1 id=file的缺陷>File的缺陷</h1><p>File API比较简单好用，能完成大部分功能，但使用上有不少的问题，比如：</p><ul><li>大多数方法出错不抛出异常
比如：删除<code>new File("1111.txt").delete()</code>，如果删除失败，<code>delete</code>方法只会返回一个<code>false</code>，开发者没办法知道具体原因，比如是因为没权限，还是因为文件已被删除？</li><li>不支持软链接，这会导致有某些情况下没办法遍历目录</li><li>文件的元数据支持较少，比如缺少文件的权限、安全属性等</li></ul><p>等等。</p><h1 id=file和path>File和Path</h1><p><code>java.nio.file.Path</code>是Java7中用于替代File的新API，File和Path的概念相似，都是表示一个文件或文件夹的抽象。实际上，也可以把Path当成新API中的File。</p><p>FIle与Path的主要区别：</p><ul><li>File是实体类，Path是接口，使得Path更符合面向对象的设计原则。</li><li>File独立于文件系统，Path与文件系统相关，以及Path能给出更多关于文件的信息。</li></ul><p>新写的代码最好就开始使用Path，有需要与File交互的地方，可以使用FIle与Path相互转换方法：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Path path <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> File<span style=color:#f92672>(</span>DEMO_PATH<span style=color:#f92672>).</span><span style=color:#a6e22e>toPath</span><span style=color:#f92672>();</span>
File file <span style=color:#f92672>=</span> path<span style=color:#f92672>.</span><span style=color:#a6e22e>toFile</span><span style=color:#f92672>();</span>
</code></pre></div><h1 id=path的基本操作>Path的基本操作</h1><h2 id=创建path>创建Path</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>URI uri <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> URI<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;file:///&#34;</span> <span style=color:#f92672>+</span> DEMO_PATH<span style=color:#f92672>);</span>
<span style=color:#75715e>// method 1
</span><span style=color:#75715e></span>Path path1 <span style=color:#f92672>=</span> Paths<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>DEMO_PATH<span style=color:#f92672>);</span>

<span style=color:#75715e>// method 2
</span><span style=color:#75715e></span>Path path2 <span style=color:#f92672>=</span> Paths<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>uri<span style=color:#f92672>);</span>

<span style=color:#75715e>// method 3
</span><span style=color:#75715e></span>Path path3 <span style=color:#f92672>=</span> Path<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>DEMO_PATH<span style=color:#f92672>);</span>

<span style=color:#75715e>// method 4
</span><span style=color:#75715e></span>Path path4 <span style=color:#f92672>=</span> Path<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>uri<span style=color:#f92672>);</span>
</code></pre></div><p>3和4是在Java11中引入的。</p><blockquote><p>由于接口的默认方法是在Java8中引入的，所以NIO刚开始是使用工具类<code>Paths</code>来创建<code>Path</code>对象</p></blockquote><h2 id=从path获取各种信息>从Path获取各种信息</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Path path <span style=color:#f92672>=</span> Path<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>DEMO_PATH<span style=color:#f92672>);</span>

<span style=color:#66d9ef>boolean</span> exists <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>exists</span><span style=color:#f92672>(</span>path<span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;exists = &#34;</span><span style=color:#f92672>+</span>exists<span style=color:#f92672>);</span>

<span style=color:#66d9ef>boolean</span> exists2 <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>exists</span><span style=color:#f92672>(</span>path<span style=color:#f92672>,</span> LinkOption<span style=color:#f92672>.</span><span style=color:#a6e22e>NOFOLLOW_LINKS</span><span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;exists2 = &#34;</span> <span style=color:#f92672>+</span> exists2<span style=color:#f92672>);</span>

<span style=color:#66d9ef>boolean</span> hidden <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>isHidden</span><span style=color:#f92672>(</span>path<span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;hidden = &#34;</span> <span style=color:#f92672>+</span> hidden<span style=color:#f92672>);</span>

<span style=color:#66d9ef>boolean</span> directory <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>isDirectory</span><span style=color:#f92672>(</span>path<span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;directory = &#34;</span> <span style=color:#f92672>+</span> directory<span style=color:#f92672>);</span>

<span style=color:#66d9ef>boolean</span> regularFile <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>isRegularFile</span><span style=color:#f92672>(</span>path<span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;regularFile = &#34;</span> <span style=color:#f92672>+</span> regularFile<span style=color:#f92672>);</span>

<span style=color:#66d9ef>boolean</span> readable <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>isReadable</span><span style=color:#f92672>(</span>path<span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;readable = &#34;</span> <span style=color:#f92672>+</span> readable<span style=color:#f92672>);</span>

BasicFileAttributes attrs <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>readAttributes</span><span style=color:#f92672>(</span>path<span style=color:#f92672>,</span> BasicFileAttributes<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;creationTime = &#34;</span> <span style=color:#f92672>+</span> attrs<span style=color:#f92672>.</span><span style=color:#a6e22e>creationTime</span><span style=color:#f92672>());</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;size = &#34;</span> <span style=color:#f92672>+</span> attrs<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>());</span>

<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>getProperty</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;os.name&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>toLowerCase</span><span style=color:#f92672>().</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;win&#34;</span><span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
    <span style=color:#75715e>// windows
</span><span style=color:#75715e></span>    DosFileAttributes dosAttrs <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>readAttributes</span><span style=color:#f92672>(</span>path<span style=color:#f92672>,</span> DosFileAttributes<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;isSystem = &#34;</span> <span style=color:#f92672>+</span> dosAttrs<span style=color:#f92672>.</span><span style=color:#a6e22e>isSystem</span><span style=color:#f92672>());</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;isReadOnly = &#34;</span> <span style=color:#f92672>+</span> dosAttrs<span style=color:#f92672>.</span><span style=color:#a6e22e>isReadOnly</span><span style=color:#f92672>());</span>
<span style=color:#f92672>}</span><span style=color:#66d9ef>else</span><span style=color:#f92672>{</span>
    <span style=color:#75715e>// linux
</span><span style=color:#75715e></span>    PosixFileAttributes posixAttrs <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>readAttributes</span><span style=color:#f92672>(</span>path<span style=color:#f92672>,</span> PosixFileAttributes<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;permissions = &#34;</span> <span style=color:#f92672>+</span> posixAttrs<span style=color:#f92672>.</span><span style=color:#a6e22e>permissions</span><span style=color:#f92672>());</span>
<span style=color:#f92672>}</span>
</code></pre></div><h2 id=写入文件>写入文件</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Path path <span style=color:#f92672>=</span> Path<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>DEMO_PATH<span style=color:#f92672>);</span>

OpenOption openOption <span style=color:#f92672>=</span> StandardOpenOption<span style=color:#f92672>.</span><span style=color:#a6e22e>APPEND</span><span style=color:#f92672>;</span>

<span style=color:#75715e>// method 1
</span><span style=color:#75715e></span><span style=color:#66d9ef>try</span><span style=color:#f92672>(</span>BufferedWriter writer <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>newBufferedWriter</span><span style=color:#f92672>(</span>path<span style=color:#f92672>,</span> StandardCharsets<span style=color:#f92672>.</span><span style=color:#a6e22e>UTF_8</span><span style=color:#f92672>,</span> openOption<span style=color:#f92672>);){</span>
    writer<span style=color:#f92672>.</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;HelloWorld&#34;</span><span style=color:#f92672>);</span>
    writer<span style=color:#f92672>.</span><span style=color:#a6e22e>newLine</span><span style=color:#f92672>();</span>
    writer<span style=color:#f92672>.</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;HelloWorld2&#34;</span><span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>

<span style=color:#75715e>// method 2
</span><span style=color:#75715e></span>Files<span style=color:#f92672>.</span><span style=color:#a6e22e>writeString</span><span style=color:#f92672>(</span>path<span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;HelloWorld3&#34;</span><span style=color:#f92672>,</span> StandardCharsets<span style=color:#f92672>.</span><span style=color:#a6e22e>UTF_8</span><span style=color:#f92672>,</span>openOption<span style=color:#f92672>);</span>

<span style=color:#75715e>// method 3
</span><span style=color:#75715e></span>Files<span style=color:#f92672>.</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span>path<span style=color:#f92672>,</span> List<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;HelloWorld4&#34;</span><span style=color:#f92672>),</span> StandardCharsets<span style=color:#f92672>.</span><span style=color:#a6e22e>UTF_8</span><span style=color:#f92672>,</span>openOption<span style=color:#f92672>);</span>
</code></pre></div><h2 id=读取文件>读取文件</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Path path <span style=color:#f92672>=</span> Path<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>DEMO_PATH<span style=color:#f92672>);</span>

<span style=color:#75715e>// method 1
</span><span style=color:#75715e></span><span style=color:#66d9ef>try</span><span style=color:#f92672>(</span>BufferedReader reader <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>newBufferedReader</span><span style=color:#f92672>(</span>path<span style=color:#f92672>,</span> StandardCharsets<span style=color:#f92672>.</span><span style=color:#a6e22e>UTF_8</span><span style=color:#f92672>);){</span>
    String line <span style=color:#f92672>=</span> reader<span style=color:#f92672>.</span><span style=color:#a6e22e>readLine</span><span style=color:#f92672>();</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>line<span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>

<span style=color:#75715e>// method 2
</span><span style=color:#75715e></span><span style=color:#66d9ef>try</span><span style=color:#f92672>(</span> Stream<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> lines <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>lines</span><span style=color:#f92672>(</span>path<span style=color:#f92672>)</span> <span style=color:#f92672>){</span>
	lines<span style=color:#f92672>.</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>

<span style=color:#75715e>// method 3
</span><span style=color:#75715e></span>String string <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>readString</span><span style=color:#f92672>(</span>path<span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>string<span style=color:#f92672>);</span>
</code></pre></div><h2 id=创建移动复制文件>创建、移动、复制文件</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>createFile</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>
        Path path <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>createFile</span><span style=color:#f92672>(</span>Path<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>DEMO_PATH<span style=color:#f92672>));</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>Files<span style=color:#f92672>.</span><span style=color:#a6e22e>exists</span><span style=color:#f92672>(</span>path<span style=color:#f92672>));</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>moveFile</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>
        Path path <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>move</span><span style=color:#f92672>(</span>Path<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>DEMO_PATH<span style=color:#f92672>),</span> Path<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>DEMO_MOVE_PATH<span style=color:#f92672>),</span> StandardCopyOption<span style=color:#f92672>.</span><span style=color:#a6e22e>REPLACE_EXISTING</span><span style=color:#f92672>);</span>
        <span style=color:#66d9ef>boolean</span> sameFile <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>isSameFile</span><span style=color:#f92672>(</span>path<span style=color:#f92672>,</span> Path<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>DEMO_MOVE_PATH<span style=color:#f92672>));</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>sameFile<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>copyFile</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>
        Path path <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>copy</span><span style=color:#f92672>(</span>Path<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>DEMO_PATH<span style=color:#f92672>),</span> Path<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>DEMO_COPY_TAR_PATH<span style=color:#f92672>),</span> StandardCopyOption<span style=color:#f92672>.</span><span style=color:#a6e22e>REPLACE_EXISTING</span><span style=color:#f92672>);</span>
        <span style=color:#66d9ef>boolean</span> sameFile <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>isSameFile</span><span style=color:#f92672>(</span>path<span style=color:#f92672>,</span> Path<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>DEMO_COPY_TAR_PATH<span style=color:#f92672>));</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>sameFile<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
</code></pre></div><h2 id=在指定目录查找文件>在指定目录查找文件</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Path dir <span style=color:#f92672>=</span> Path<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;G:/&#34;</span><span style=color:#f92672>);</span>
Path file <span style=color:#f92672>=</span> Path<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;demoFile2.txt&#34;</span><span style=color:#f92672>);</span>

Files<span style=color:#f92672>.</span><span style=color:#a6e22e>find</span><span style=color:#f92672>(</span>dir<span style=color:#f92672>,</span> 1<span style=color:#f92672>,</span> <span style=color:#f92672>(</span>p<span style=color:#f92672>,</span> attr<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span>
Files<span style=color:#f92672>.</span><span style=color:#a6e22e>isRegularFile</span><span style=color:#f92672>(</span>p<span style=color:#f92672>)</span> <span style=color:#f92672>&amp;&amp;</span> p<span style=color:#f92672>.</span><span style=color:#a6e22e>getFileName</span><span style=color:#f92672>().</span><span style=color:#a6e22e>endsWith</span><span style=color:#f92672>(</span>file<span style=color:#f92672>)</span>
    <span style=color:#f92672>,</span> FileVisitOption<span style=color:#f92672>.</span><span style=color:#a6e22e>FOLLOW_LINKS</span><span style=color:#f92672>).</span><span style=color:#a6e22e>findAny</span><span style=color:#f92672>()</span>
    <span style=color:#f92672>.</span><span style=color:#a6e22e>ifPresent</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
</code></pre></div><h2 id=遍历目录>遍历目录</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>        Path walkPath <span style=color:#f92672>=</span> Path<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>DEMO_WALK_PATH<span style=color:#f92672>);</span>

        <span style=color:#75715e>// method 1
</span><span style=color:#75715e></span>        AtomicLong fileCount <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AtomicLong<span style=color:#f92672>();</span>
        FileVisitor<span style=color:#f92672>&lt;</span>Path<span style=color:#f92672>&gt;</span> fileVisitor <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> FileVisitor<span style=color:#f92672>&lt;&gt;()</span> <span style=color:#f92672>{</span>
            <span style=color:#a6e22e>@Override</span>
            <span style=color:#66d9ef>public</span> FileVisitResult <span style=color:#a6e22e>preVisitDirectory</span><span style=color:#f92672>(</span>Path dir<span style=color:#f92672>,</span> BasicFileAttributes attrs<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>
                <span style=color:#66d9ef>return</span> FileVisitResult<span style=color:#f92672>.</span><span style=color:#a6e22e>CONTINUE</span><span style=color:#f92672>;</span>
            <span style=color:#f92672>}</span>

            <span style=color:#a6e22e>@Override</span>
            <span style=color:#66d9ef>public</span> FileVisitResult <span style=color:#a6e22e>visitFile</span><span style=color:#f92672>(</span>Path file<span style=color:#f92672>,</span> BasicFileAttributes attrs<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>
                fileCount<span style=color:#f92672>.</span><span style=color:#a6e22e>getAndIncrement</span><span style=color:#f92672>();</span>
                <span style=color:#66d9ef>return</span> FileVisitResult<span style=color:#f92672>.</span><span style=color:#a6e22e>CONTINUE</span><span style=color:#f92672>;</span>
            <span style=color:#f92672>}</span>

            <span style=color:#a6e22e>@Override</span>
            <span style=color:#66d9ef>public</span> FileVisitResult <span style=color:#a6e22e>visitFileFailed</span><span style=color:#f92672>(</span>Path file<span style=color:#f92672>,</span> IOException exc<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>
                <span style=color:#66d9ef>return</span> FileVisitResult<span style=color:#f92672>.</span><span style=color:#a6e22e>CONTINUE</span><span style=color:#f92672>;</span>
            <span style=color:#f92672>}</span>

            <span style=color:#a6e22e>@Override</span>
            <span style=color:#66d9ef>public</span> FileVisitResult <span style=color:#a6e22e>postVisitDirectory</span><span style=color:#f92672>(</span>Path dir<span style=color:#f92672>,</span> IOException exc<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>
                <span style=color:#66d9ef>return</span> FileVisitResult<span style=color:#f92672>.</span><span style=color:#a6e22e>CONTINUE</span><span style=color:#f92672>;</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>};</span>
        Files<span style=color:#f92672>.</span><span style=color:#a6e22e>walkFileTree</span><span style=color:#f92672>(</span>walkPath<span style=color:#f92672>,</span> fileVisitor<span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>fileCount<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>());</span>

        <span style=color:#75715e>// method 2
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>long</span> count2 <span style=color:#f92672>=</span> Files<span style=color:#f92672>.</span><span style=color:#a6e22e>walk</span><span style=color:#f92672>(</span>walkPath<span style=color:#f92672>,</span> FileVisitOption<span style=color:#f92672>.</span><span style=color:#a6e22e>FOLLOW_LINKS</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>Files<span style=color:#f92672>::</span>isRegularFile<span style=color:#f92672>).</span><span style=color:#a6e22e>count</span><span style=color:#f92672>();</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>count2<span style=color:#f92672>);</span>
</code></pre></div><h1 id=参考资料>参考资料</h1><p>[1]Oracle对于NIO File API的介绍:https://www.oracle.com/technical-resources/articles/javase/nio.html</p><p>[2]file与path方法对照表:https://docs.oracle.com/javase/tutorial/essential/io/legacy.html</p></div><footer><ul class=stats><li class=categories><ul><i class="fa fa-folder"></i><li><a class=article-category-link href=https://g.nereusyi.com/categories/java>java</a></li></ul></li><li class=tags><ul><i class="fa fa-tags"></i><li><a class=article-category-link href=https://g.nereusyi.com/tags/java>java</a></li></ul></li></ul></footer></article><article class=post><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//nereusyi.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article><ul class="actions pagination"><li><a href=https://g.nereusyi.com/post/2020/08/devops-setup-jenkins-in-docker/ class="button big previous">在Docker中安装并设置Jenkins</a></li><li><a href=https://g.nereusyi.com/post/2020/10/use-jmh-java-benchmark/ class="button big next">使用JMH对Java应用进行微基准测试</a></li></ul></div><section id=sidebar><section id=intro><a href=https://g.nereusyi.com/ class=logo><img src=https://g.nereusyi.com/img/web/logo.jpg alt=Nereus></a><header><h2>Nereus</h2><p>一名Java开发</p></header><ul class=icons><li><a href=//github.com/ivyboy target=_blank title=GitHub class="fa fa-github"></a></li></ul></section><section class=recent-posts><div class=mini-posts><header><h3>Recent Posts</h3></header><div class=posts-container><article class=mini-post><header><h3><a href=https://g.nereusyi.com/post/>Post</a></h3><time class=published datetime=2021-03-28>March 28, 2021</time></header></article><article class=mini-post><header><h3><a href=https://g.nereusyi.com/post/2021/03/spring-boot-bean-validation/>Spring Boot Bean Validation 示例</a></h3><time class=published datetime=2021-03-28>March 28, 2021</time></header></article></div><a href=/post/ class=button>View more posts</a></div></section><section id=categories><header><h3><a href=https://g.nereusyi.com/categories/>Categories</a></h3></header><p><article><header><a href=https://g.nereusyi.com/categories/java/>java</a>
<span style=float:right>6</span></header></article></p><p><article><header><a href=https://g.nereusyi.com/categories/spring-boot/>spring-boot</a>
<span style=float:right>4</span></header></article></p><p><article><header><a href=https://g.nereusyi.com/categories/docker/>docker</a>
<span style=float:right>2</span></header></article></p><p><article><header><a href=https://g.nereusyi.com/categories/jvm/>jvm</a>
<span style=float:right>2</span></header></article></p><p><article><header><a href=https://g.nereusyi.com/categories/devops/>devops</a>
<span style=float:right>1</span></header></article></p><p><article><header><a href=https://g.nereusyi.com/categories/example/>example</a>
<span style=float:right>1</span></header></article></p><p><article><header><a href=https://g.nereusyi.com/categories/life/>life</a>
<span style=float:right>1</span></header></article></p><p><article><header><a href=https://g.nereusyi.com/categories/performance/>performance</a>
<span style=float:right>1</span></header></article></p><p><article><header><a href=https://g.nereusyi.com/categories/spring-security/>spring-security</a>
<span style=float:right>1</span></header></article></p><p><article><header><a href=https://g.nereusyi.com/categories/tool/>tool</a>
<span style=float:right>1</span></header></article></p><p><article><header><a href=https://g.nereusyi.com/categories/%E5%B0%8F%E6%8A%80%E5%B7%A7/>小技巧</a>
<span style=float:right>1</span></header></article></p></section><section id=footer><p class=copyright>&copy; 2021
NereusYi
.
Powered by <a href=//gohugo.io target=_blank>Hugo</a>
<a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/><img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-nc/4.0/88x31.png></a><br>This site is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/>Creative Commons Attribution-NonCommercial 4.0 International License</a>.</p></section></section></div><a id=back-to-top href=# class="fa fa-arrow-up fa-border fa-2x"></a><script src=//cdn.bootcss.com/highlight.js/9.11.0/highlight.min.js></script><script src=//cdn.bootcss.com/highlight.js/9.11.0/languages/java.min.js></script><script>hljs.configure({languages:[]}),hljs.initHighlightingOnLoad()</script><script src=https://code.jquery.com/jquery-3.2.1.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.js></script><script src=https://g.nereusyi.com/js/util.js></script><script src=https://g.nereusyi.com/js/main.js></script><script src=https://g.nereusyi.com/js/backToTop.js></script><script>hljs.initHighlightingOnLoad()</script></body></html>