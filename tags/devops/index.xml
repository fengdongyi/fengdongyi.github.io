<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>devops on NereusYi</title><link>https://g.nereusyi.com/tags/devops/</link><description>Recent content in devops on NereusYi</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sun, 09 Aug 2020 13:20:06 +0800</lastBuildDate><atom:link href="https://g.nereusyi.com/tags/devops/index.xml" rel="self" type="application/rss+xml"/><item><title>在Docker中安装并设置Jenkins</title><link>https://g.nereusyi.com/post/2020/08/devops-setup-jenkins-in-docker/</link><pubDate>Sun, 09 Aug 2020 13:20:06 +0800</pubDate><guid>https://g.nereusyi.com/post/2020/08/devops-setup-jenkins-in-docker/</guid><description>简介 相比在主机中直接安装各种基础服务，在Docker中安装和升级都更方便，也更不容易破坏其他的基础服务。下面总结一下Jenkins在Docker中的使用。
安装并运行Jenkins 安装并运行命令如下：
docker run -d -u root --restart always --name jenkins \ -e &amp;#34;JAVA_OPTS=-Dorg.apache.commons.jelly.tags.fmt.timeZone=Asia/Shanghai -Duser.timezone=Asia/Shanghai -Dorg.apache.commons.jelly.tags.fmt.timeZone=Asia/Shanghai&amp;#34; \ --group-add $(stat -c &amp;#39;%g&amp;#39; /var/run/docker.sock) \ -v /etc/localtime:/etc/localtime:ro \ -v /opt/data/jenkins/workspace/:/usr/src/app \ -v /var/run/docker.sock:/var/run/docker.sock \ -v $(which docker):$(which docker) \ -v /data/jenkins:/var/jenkins_home \ -v /data/jenkins_tool:/jenkins_tool \ -v /data/jenkins_tool/repo:/repo \ -p 8099:8080 -p 50000:50000 \ jenkins/jenkins:lts Jenkins的Docker官方镜像中有很多参数的解释，这里列出其中一些参数以及使用原因：
-u root使用root启动镜像中的Jenkins服务，会有一定安全风险，但权限方面会方便很多，也考虑到是在内网中运行所以问题不大
-e xxxxxxxx和-v /etc/localtime:/etc/localtime:ro设置Jenkins的时区
-v /var/run/docker.sock:/var/run/docker.sock -v $(which docker):$(which docker) 这两条参数让在Docker中的Jenkins也能访问宿主机中的Docker，让项目的构建环境（如maven、node）也能够在Docker中运行构建
-p 50000:50000用于与Jenkins slave通信</description></item></channel></rss>