<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>performance on NereusYi</title><link>https://g.nereusyi.com/tags/performance/</link><description>Recent content in performance on NereusYi</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sun, 25 Oct 2020 14:45:15 +0800</lastBuildDate><atom:link href="https://g.nereusyi.com/tags/performance/index.xml" rel="self" type="application/rss+xml"/><item><title>使用JMH对Java应用进行微基准测试</title><link>https://g.nereusyi.com/post/2020/10/use-jmh-java-benchmark/</link><pubDate>Sun, 25 Oct 2020 14:45:15 +0800</pubDate><guid>https://g.nereusyi.com/post/2020/10/use-jmh-java-benchmark/</guid><description>简介 JMH（Java Microbenchmark Harness）是一个帮助开发者更好的实现微基准测试(microbenchmark)的工具，属于OpenJDK项目的一部分。虽然名字叫微基准测试工具，但JMH也可以适用于其他类型的基准测试，对较大型项目的基准测试同样也有帮助。
为什么需要用JMH来做基准测试 由于JVM会对代码做各种优化，而自己写的基准测试很难考虑到各方面的优化，这样会导致测试的结果可能跟线上的相差较大。JMH本身虽然不能完全消除这些优化的影响，但是它能帮助减轻这方面的影响。
本文使用环境：Java 8
使用Maven构建运行JMH 使用Maven构建运行JMH是被OpenJDK团队推荐的使用方式，因为该方式能产生更加可靠的结果。
使用Maven创建新项目 使用该命令可以创建一个基于Maven的JMH模板项目：
mvn archetype:generate -DinteractiveMode=false -DarchetypeGroupId=org.openjdk.jmh -DarchetypeArtifactId=jmh-java-benchmark-archetype -DarchetypeVersion=1.25.2 -DgroupId=com.nereusyi.demos -DartifactId=jmh-template -Dversion=1.0 官方示例的命令行参数中，没有-DarchetypeVersion=1.25.2这行，那样默认会生成较老版本的模板项目，需要较多改动才能适配新版本的Java，所以最好加上该参数。也可以在maven仓库上查看JMH的最新版本并替换
部分输出如下：
[INFO] ---------------------------------------------------------------------------- [INFO] Using following parameters for creating project from Archetype: jmh-java-benchmark-archetype:1.25.2 [INFO] ---------------------------------------------------------------------------- [INFO] Parameter: groupId, Value: com.nereusyi.demos [INFO] Parameter: artifactId, Value: jmh-template [INFO] Parameter: version, Value: 1.0 [INFO] Parameter: package, Value: com.nereusyi.demos [INFO] Parameter: packageInPathFormat, Value: com/nereusyi/demos [INFO] Parameter: package, Value: com.</description></item></channel></rss>